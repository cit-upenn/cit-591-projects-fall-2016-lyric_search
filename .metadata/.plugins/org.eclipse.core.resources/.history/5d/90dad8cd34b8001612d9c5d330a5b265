import java.io.IOException;
import java.util.ArrayList;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class JSoupTester {

	public static void main(String[] args) {

		ArrayList<String> letterURLArray = new ArrayList<String>();
		ArrayList<String> artistURLArray = new ArrayList<String>();

		Document doc;
		try {
			// connect to website, store in doc object
			doc = Jsoup.connect("http://www.azlyrics.com/").get();
			// System.out.println(doc.toString());

			// store "http://www.azlyrics.com" in String baseUri
			String baseUri = doc.baseUri();
			// System.out.println(baseUri);

			// select element for a-z links
			Elements letterURLs = doc.select(".btn-group a");

			for (Element letterURL : letterURLs) {
				// System.out.println(letterURL.toString());
				String url = letterURL.attr("href");

				// add url to urls ArrayList
				letterURLArray.add(url);

			}

			// for (String url : urls) {
			// System.out.println(url);
			// }

			doc = Jsoup.connect(letterURLArray.get(0)).get();
			// System.out.println(doc.toString());
			Elements artistURLs = doc.select(".col-sm-6 a");
			// System.out.println(aURLs.toString());

			for (Element artistURL : artistURLs) {
				// System.out.println(aURL.toString());
				String a = artistURL.attr("href");

				// add aUrl to aUrls ArrayList
				a = baseUri + "/" + a;
				artistURLArray.add(a);
				// System.out.println(a);
			}

			String albumName = "";
			String song = "";
			String url = "";
			ArrayList<String> songURLArray = new ArrayList<String>();
			// code added===============================================================
			doc = Jsoup.connect("http://www.azlyrics.com/a/aaliyah.html").get();
			
			// to select using id: use # (use . to select using style)
			Element divElement = doc.select("#listAlbum").get(0);

			Elements albums = divElement.select("div, a"); // get all <div> and
															// <a> tags
			// for each album, get album name in <b> tag and href in <a> tag
			for (Element element : albums) {
				// if div element then get album name in <b> tag
				if (element.tagName() == "div") {
					// if div html has other songs then album name = "other
					// songs"
					if (element.html().contains("other")) {
						albumName = "other songs";
					} else {
						Elements elements = element.getElementsByTag("b");
						Element bTag = elements.get(0); // this is the b tag.
						albumName = bTag.html(); // to get string inside bTag
					}
				} else { // this is <a> tag, get href and song name
					url = element.attr("href");
					if (url.contains("/lyrics/") && url.length() > 0) {
						song = element.html();
						//url has two dots in the front. need to remove them and add base url
						//../lyrics/aaliyah/intro.html 
						url = baseUri + url.substring(2, url.length());
						songURLArray.add(url);
						//System.out.println(albumName + " | " + url + " | " + song);
					}
				}
			}
			
			//Now get lyrics for each songUrl 
			for (String songUrl : songURLArray){
				doc = Jsoup.connect(songUrl).get();
				//divElement = doc.select(".ringtone").get(0);
				//System.out.println(divElement.toString());
				
				//System.out.println(doc.toString());
				Elements allDivElements = doc.select("div.col-xs-12.col-lg-8.text-center");
				//System.out.println(allDivElements.size());
				Element parentDivElement = allDivElements.get(0); // get first <div>
				//how to use multiple classes to select element - see answer in link below
				//http://stackoverflow.com/questions/21967413/jsoup-get-element-with-multiple-classes
				//System.out.println(parentDivElement.toString());
				
				
				//get all children div element of parentDivElement
				Elements childDivElements = parentDivElement.getElementsByTag("div");
				//System.out.println(childDivElements.size());
				divElement = childDivElements.get(8);  //get eight div element that has lyrics
				//System.out.println(divElement.toString());
				System.out.println(divElement.text());
				//get the last div
				//Element lastDiv = childDivElements.last();
				//System.out.println(lastDiv.toString());
				break; //remove break to get all
			}
			

		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

	}

}
